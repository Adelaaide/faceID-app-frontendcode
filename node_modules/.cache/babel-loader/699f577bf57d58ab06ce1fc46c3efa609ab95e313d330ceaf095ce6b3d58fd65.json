{"ast":null,"code":"import _classCallCheck from\"/Users/AdelaideGrey/faceID-app-frontendcode/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/AdelaideGrey/faceID-app-frontendcode/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/AdelaideGrey/faceID-app-frontendcode/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/AdelaideGrey/faceID-app-frontendcode/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import'./App.scss';import Navigation from'./Components/Navigation/Navigation';import FaceRecognition from'./Components/FaceRecognition/FaceRecognition';import Logo from'./Components/Logo/Logo';import ImageLinkForm from'./Components/ImageLinkForm/ImageLinkForm';import Signin from'./Components/Signin/Signin';import Register from'./Components/Register/Register';import Rank from'./Components/Rank/Rank';import ParticlesBg from'particles-bg';// Set initial state\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={input:'',imageUrl:'',box:{},route:'signin',isSignedIn:false,user:{id:'',name:'',email:'',entries:0,joined:''}};var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.loadUser=function(data){_this.setState({user:{id:data.id,name:data.name,email:data.email,entries:data.entries,joined:data.joined}});};_this.calculateFaceLocation=function(data){var clarifaiFace=data.outputs[0].data.regions[0].region_info.bounding_box;var image=document.getElementById('inputimage');var width=Number(image.width);var height=Number(image.height);return{leftCol:clarifaiFace.left_col*width,topRow:clarifaiFace.top_row*height,rightCol:width-clarifaiFace.right_col*width,bottomRow:height-clarifaiFace.bottom_row*height};};_this.displayFaceBox=function(box){_this.setState({box:box});};_this.onInputChange=function(event){_this.setState({input:event.target.value});};_this.onPictureSubmit=function(){_this.setState({imageUrl:_this.state.input});fetch('https://jade-faithful-skunk.cyclic.app/imageurl',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({input:_this.state.input})}).then(function(response){return response.json();}).then(function(response){if(response){_this.displayFaceBox(_this.calculateFaceLocation(response));fetch('https://jade-faithful-skunk.cyclic.app/image',{method:'put',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:_this.state.user.id})}).then(function(response){return response.json();}).then(function(count){_this.setState(Object.assign(_this.state.user,{entries:count}));}).catch(console.log);}}).catch(function(err){return console.log(err);});};_this.onRouteChange=function(route){if(route==='signout'){_this.setState(initialState);}else if(route==='home'){_this.setState({isSignedIn:true});}else{_this.setState({route:route});}};_this.state=initialState;return _this;}// Load user data into state\n_createClass(App,[{key:\"render\",value:function render(){var _this$state=this.state,isSignedIn=_this$state.isSignedIn,imageUrl=_this$state.imageUrl,route=_this$state.route,box=_this$state.box;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(ParticlesBg,{className:\"particlesbg\",num:\"200\",type:\"circle\",bg:true}),/*#__PURE__*/_jsx(Navigation,{isSignedIn:isSignedIn,onRouteChange:this.onRouteChange}),route==='home'?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(Rank,{name:this.state.user.name,entries:this.state.user.entries}),/*#__PURE__*/_jsx(ImageLinkForm,{onInputChange:this.onInputChange,onPictureSubmit:this.onPictureSubmit}),/*#__PURE__*/_jsx(FaceRecognition,{box:box,imageUrl:imageUrl})]}):route===\"Signin\"?/*#__PURE__*/_jsx(Signin,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):/*#__PURE__*/_jsx(Register,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})]});}}]);return App;}(Component);export default App;","map":{"version":3,"names":["React","Component","Navigation","FaceRecognition","Logo","ImageLinkForm","Signin","Register","Rank","ParticlesBg","initialState","input","imageUrl","box","route","isSignedIn","user","id","name","email","entries","joined","App","loadUser","data","setState","calculateFaceLocation","clarifaiFace","outputs","regions","region_info","bounding_box","image","document","getElementById","width","Number","height","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","displayFaceBox","onInputChange","event","target","value","onPictureSubmit","state","fetch","method","headers","body","JSON","stringify","then","response","json","count","Object","assign","catch","console","log","err","onRouteChange"],"sources":["/Users/AdelaideGrey/faceID-app-frontendcode/src/App.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport './App.scss';\nimport Navigation from './Components/Navigation/Navigation';\nimport FaceRecognition from './Components/FaceRecognition/FaceRecognition';\nimport Logo from './Components/Logo/Logo';\nimport ImageLinkForm from './Components/ImageLinkForm/ImageLinkForm';\nimport Signin from './Components/Signin/Signin';\nimport Register from './Components/Register/Register';\nimport Rank from './Components/Rank/Rank';\nimport ParticlesBg from 'particles-bg';\n\n// Set initial state\nconst initialState ={\n  input: '',\n  imageUrl: '',\n  box: {},\n  route: 'signin',\n  isSignedIn: false,\n  user: {\n    id: '',\n    name: '',\n    email: '',\n    entries: 0,\n    joined: ''\n  }\n}\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = initialState;\n  }\n\n  // Load user data into state\n  loadUser = (data) => {\n    this.setState({\n      user: {\n        id: data.id,\n        name: data.name,\n        email: data.email,\n        entries: data.entries,\n        joined: data.joined\n      }\n    })\n  }\n\n  // Calculate face location\n  calculateFaceLocation = (data) => {\n    const clarifaiFace = data.outputs[0].data.regions[0].region_info.bounding_box;\n    const image = document.getElementById('inputimage');\n    const width = Number(image.width);\n    const height = Number(image.height);\n    return {\n      leftCol: clarifaiFace.left_col * width,\n      topRow: clarifaiFace.top_row * height,\n      rightCol: width - (clarifaiFace.right_col * width),\n      bottomRow: height - (clarifaiFace.bottom_row * height)\n    }\n  }\n\n  // Display face box\n  displayFaceBox = (box) => {\n    this.setState({ box });\n  }\n\n  // Handle input change\n  onInputChange = (event) => {\n    this.setState({ input: event.target.value });\n  }\n\n  // Submit picture\n  onPictureSubmit = () => {\n    this.setState({imageUrl: this.state.input})\n    fetch('https://jade-faithful-skunk.cyclic.app/imageurl', {\n      method: 'post',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify ({\n        input: this.state.input\n      })\n    })\n    .then(response => response.json())\n    .then(response => {\n      if (response) {\n        this.displayFaceBox(this.calculateFaceLocation(response))\n        fetch('https://jade-faithful-skunk.cyclic.app/image', {\n          method: 'put',\n          headers: {'Content-Type': 'application/json'},\n          body: JSON.stringify ({\n            id: this.state.user.id\n          })\n        })\n        .then(response => response.json())\n        .then(count => {\n          this.setState(Object.assign(this.state.user, { entries: count}))\n        })\n        .catch(console.log);\n      }\n    })\n    .catch(err => console.log(err));\n  }\n  \n  onRouteChange = (route) => {\n    if (route === 'signout') {\n      this.setState(initialState);\n    } else if (route === 'home') {\n      this.setState({isSignedIn: true})\n    } else {\n      this.setState({route: route});\n    }\n  }   \n  \n  render() {\n    const { isSignedIn, imageUrl, route, box} = this.state;\n    return (\n      <div className=\"App\">\n        <ParticlesBg className=\"particlesbg\" num=\"200\" type=\"circle\" bg={true} />\n        <Navigation isSignedIn={isSignedIn} onRouteChange={this.onRouteChange} />\n        {route === 'home'\n\n\n          ? <div>\n              <Logo />\n              <Rank name={this.state.user.name} entries={this.state.user.entries}/>\n              <ImageLinkForm \n                onInputChange={this.onInputChange}\n                onPictureSubmit={this.onPictureSubmit}\n              />\n              <FaceRecognition box={box} imageUrl={imageUrl} />\n            </div>\n\n\n          : (\n              route === \"Signin\" \n              ? <Signin loadUser={this.loadUser} onRouteChange={this.onRouteChange} />\n              : <Register loadUser={this.loadUser} onRouteChange={this.onRouteChange} />\n          )\n        }\n      </div>\n    );\n  }\n}\n\n\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}